<!DOCTYPE html>
<html lang="zh-CN">
<head>
  {% load staticfiles %}

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
  <title>主页</title>
  <link rel="stylesheet" href="{% static 'home/css/main.css' %}">
  <!-- Bootstrap -->
  <link rel="stylesheet" href="{% static 'home/css/bootstrap.min.css' %}">
  <!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
  <!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
  <!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
  <script src="{% static 'home/js/jquery.min.js' %}"></script>
  <![endif]-->
  <style type="text/css">
    .container {
      width: 1032px;
    }
  </style>
</head>
<body style="background: #F6F6F6;">
{% include 'home/nav.html' %}
<div class="container" style="min-height: 600px;display: flex;flex-direction: row;margin-bottom: 100px;margin-top: 100px;">
  <div style="width: 70%;height: 100%;margin-right: 1%;background: #ffffff;" class="left">
    {% for item in strategy %}
      <div style="width: 100%;padding:0 20px 20px 20px;border-bottom: 1px solid #eeeeee;overflow: hidden">
        <a href="{% url 'detail' item.id %}" style="color: #777;"><h3>{{ item.title }}</h3></a>
        <div style="display: flex;flex-direction: row;" onclick="window.location.href='{% url 'detail' item.id %}'">
          <div>
        {% if item.img %}
          <img src="{{ MEDIA_URL }}{{ item.img }}" alt=""
               class="strategy-img">
          {% else %}
          <img src="{{ MEDIA_URL }}april.jpg" alt=""
               class="strategy-img">
        {% endif %}
          </div>
          <div class="rich-content" style="" onclick="window.location.href='{% url 'detail' item.id %}'">
            {% autoescape off %}
              {{ item.content }}
            {% endautoescape %}
          </div>
        </div>
        <!--<div style="display: flex;flex-direction: row;margin-top: 10px;padding-left: 5px;">
          <button type="button" class="btn btn-default up" style="margin-right: 15px;" value="{{ item.id }}">
            <span class="glyphicon glyphicon-triangle-top"></span>赞同 <span class="count">{{ item.users_like_count }}</span>
          </button>
          <button type="button" class="btn btn-default" style="margin-right: 10px;"><span
                  class="glyphicon glyphicon-triangle-bottom"></span></button>
          <button type="button" class="btn btn-default" style="margin-right: 5px;border: none;">{{ item.comment_count }}条评论</button>
          <button type="button" class="btn btn-default" style="margin-right: 5px;border: none;"><span class="
glyphicon glyphicon-share" style="margin-right: 3px;"></span>分享
          </button>
          <button type="button" class="btn btn-default" style="margin-right: 5px;border: none;"><span class="
glyphicon glyphicon-star" style="margin-right: 3px;" onclick="window.location.href='{% url 'detail' item.id %}'"></span>收藏
          </button>
        </div>-->
      </div>
    {% endfor %}
    <!--静态-->
    <!--<div style="width: 100%;height: 200px;padding:0 20px 20px 20px;border-bottom: 1px solid #eeeeee;">
      <h3>标题</h3>
      <div style="display: flex;flex-direction: row;">
        <img src="../../static/home/images/april.jpg" alt=""
             style="height: 100px;width: 160px;border: 1px solid #eeeeee;margin-right: 20px;">
        <div style="font-size: 15px;height: 110px;overflow: hidden;text-overflow: ellipsis;">
          伦巴第区主要的高山风景由斯泰尔维奥国家公园保护起来，这是意大利较大的国家公园。这块山区运动场提供了许多滑雪机会，也有将近1000英里（1600公里）配有路标的远足小路。博尔米奥镇（Bormlo）是较好的观赏点，东面有一个壮观的峡谷——泽布鲁山谷（Valle
          dello Zebrù），是初次来这里徒步旅行的游客的首选。

        </div>
      </div>
      <div style="display: flex;flex-direction: row;margin-top: 10px;padding-left: 5px;">
        <button type="button" class="btn btn-default" style="margin-right: 5px;"><span
                class="glyphicon glyphicon-triangle-top"></span>赞同 14
        </button>
        <button type="button" class="btn btn-default" style="margin-right: 10px;"><span
                class="glyphicon glyphicon-triangle-bottom"></span></button>
        <button type="button" class="btn btn-default" style="margin-right: 5px;border: none;">9条评论</button>
        <button type="button" class="btn btn-default" style="margin-right: 5px;border: none;"><span class="
glyphicon glyphicon-share" style="margin-right: 3px;"></span>分享
        </button>
        <button type="button" class="btn btn-default" style="margin-right: 5px;border: none;"><span class="
glyphicon glyphicon-star" style="margin-right: 3px;"></span>收藏
        </button>
        <button type="button" class="btn btn-default" style="margin-right: 5px;border: none;"><span class="
glyphicon glyphicon-heart" style="margin-right: 3px;"></span>感谢
        </button>
      </div>
    </div>-->
  </div>
  <div style="width: 29%;height: 100%;" class="right">
    <div style="height: 90px;width: 100%;padding-top:20px;background: #ffffff;" class="text-center">
      <button type="button" class="btn btn-default btn-lg"
              style="margin-right: 30px;font-size: 14px;padding: 0;border: 0;" onclick="gowrite();">
        <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>
        <div style="margin-top: 10px;">写攻略</div>
      </button>
      <button type="button" class="btn btn-default btn-lg"
              style="margin-right: 30px;font-size: 14px;padding: 0;border: 0;"  onclick="window.location.href='{% url 'person' 'content1' %}'">
        <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
        <div style="margin-top: 10px;">个人主页</div>
      </button>
      <button type="button" class="btn btn-default btn-lg" style="font-size: 14px;padding: 0;border: 0;"  onclick="window.location.href='{% url 'edit' %}'">
        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
        <div style="margin-top: 10px;">编辑资料</div>
      </button>
    </div>
    <div style="height: 200px;width: 100%;background: #ffffff;margin-top: 20px;padding: 10px;">
      <h1>广告图位置</h1>
    </div>
    <div style="width: 100%;margin-bottom: 10px;background: #ffffff;" class="">
      <a href="{% url 'person' 'collection' %}" class="list-group-item"><span class="glyphicon glyphicon-star" aria-hidden="true"
                                                style="margin-right: 10px;"></span>我的收藏<span class="badge">{{ user_collection.count }}</span></a>
      <a href="{% url 'person' 'follow' %}" class="list-group-item"><span class="glyphicon glyphicon-eye-open" aria-hidden="true"
                                                style="margin-right: 10px;"></span>我的关注<span class="badge">{{ follow.count }}</span></a>
      <a href="{% url 'person' 'strategy' %}" class="list-group-item"><span class="glyphicon glyphicon-plane" aria-hidden="true"
                                                style="margin-right: 10px;"></span>我的攻略<span class="badge">{{ strategy.count }}</span></a>
    </div>
    <footer class="Footer">
      <a href="" class="Footer-item" target="_blank" rel="noreferrer noopener">旅途协议</a>
      <span class="Footer-dot"></span>
      <a href="" class="Footer-item" target="_blank" rel="noreferrer noopener">旅途指南</a>
      <span class="Footer-dot"></span>
      <a href="http://www.12377.cn" class="Footer-item" target="_blank" rel="noreferrer noopener">网上有害信息举报专区</a>
      <span class="Footer-dot"></span>
      <a href="" class="Footer-item" target="_blank" rel="noreferrer noopener">联系我们</a>
      <span class="Footer-item">© 2019 旅途</span>
    </footer>
  </div>
</div>
</body>
<script type="text/javascript">
  function gowrite() {
    $(location).attr('href', 'write');
  }
  function godetail() {
    $(location).attr('href', 'detail'+item.id);
  }
  $(function () {
    $('.up').click(function () {
      var t = $(this)
      $.ajax({
        url: '{% url 'like' %}',
        type: 'POST',
        data: {
          id: $(this).val(),
        },
        cache: false,
        success: function (result) {
          console.log('re', t);
          value = parseInt(result.sum);
          t.find('.count').text(value)
        }
      })
    })
  })
</script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="{% static 'home/js/bootstrap.min.js' %}"></script>
</html>